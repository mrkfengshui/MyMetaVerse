<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>Ultimate Icon Generator</title>
    <style>
        /* 1. 字型設定 (優先讀取系統安裝的青柳隸書) */
        @font-face {
            font-family: 'MyFengShuiFont';
            src: local('AoyagiReishoSIMO2'), local('AoyagiReishoSIMO2_T'), local('AoyagiReisho'),
                 url('AoyagiReishoSIMO2_T.ttf') format('truetype');
        }

        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 80px;
            font-family: sans-serif;
            overflow: auto;
            
            /* 預設背景：深色，方便預覽 */
            background-color: #333;
            transition: background-color 0.3s;
        }

        /* 當切換為透明模式時的背景 (棋盤格紋) */
        body.transparent-mode {
            background-color: #fff;
            background-image: 
                linear-gradient(45deg, #ccc 25%, transparent 25%), 
                linear-gradient(-45deg, #ccc 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, #ccc 75%), 
                linear-gradient(-45deg, transparent 75%, #ccc 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
        }

        .controls {
            position: fixed;
            top: 0; left: 0; right: 0;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 15px;
            z-index: 100;
            display: flex;
            justify-content: center;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        button {
            padding: 8px 16px;
            cursor: pointer;
            font-weight: bold;
            border-radius: 4px;
            border: none;
            background: #1890ff;
            color: white;
        }
        button.secondary { background: #555; }
        button:hover { opacity: 0.9; }

        .canvas-container {
            margin: 20px auto;
            transform-origin: top center;
            transition: transform 0.2s;
        }

        /* 2. Icon 本體 (1024x1024) */
        .app-icon {
            width: 1024px;
            height: 1024px;
            background-color: #E34234; /* 朱紅色 */
            
            /* 預設是圓形，可透過 class 切換 */
            border-radius: 50%;
            transition: border-radius 0.3s;
            
            position: relative;
            /* 只有在預覽時才需要陰影，輸出透明圖時最好不要陰影，以免邊緣髒髒的 */
            box-shadow: none; 
            overflow: hidden;
        }

        /* 方形模式 */
        .app-icon.square {
            border-radius: 0; 
        }

        /* 3. 文字層 */
        .text-layer {
            position: absolute;
            font-family: 'MyFengShuiFont', 'Noto Serif TC', serif;
            line-height: 1;
            pointer-events: none;
            font-weight: normal;
        }

        .sub-char {
            color: white;
            font-size: 378px; 
            bottom: 26%;
            right: 8%;
        }

        .main-char {
            color: black;
            font-size: 700px; 
            top: 12%;
            left: 2%;
        }
    </style>
</head>
<body>

    <div class="controls">
        <label>縮放: <input type="range" id="scaleSlider" min="0.1" max="1" step="0.05" value="0.5"> <span id="scaleVal">50%</span></label>
        
        <button onclick="toggleShape()" id="shapeBtn">切換為方形 (App Store用)</button>
        <button onclick="toggleBg()" class="secondary" id="bgBtn">背景：深色</button>
    </div>

    <div class="canvas-container" id="canvasContainer">
        <div class="app-icon" id="captureTarget">
            <span class="text-layer sub-char">字</span>
            <span class="text-layer main-char">八</span>
        </div>
    </div>

    <script>
        const slider = document.getElementById('scaleSlider');
        const container = document.getElementById('canvasContainer');
        const valDisplay = document.getElementById('scaleVal');
        const icon = document.getElementById('captureTarget');
        const body = document.body;
        const bgBtn = document.getElementById('bgBtn');
        const shapeBtn = document.getElementById('shapeBtn');

        // 縮放控制
        container.style.transform = `scale(${slider.value})`;
        slider.addEventListener('input', (e) => {
            const val = e.target.value;
            container.style.transform = `scale(${val})`;
            valDisplay.textContent = Math.round(val * 100) + '%';
        });

        // 形狀切換
        function toggleShape() {
            icon.classList.toggle('square');
            if(icon.classList.contains('square')) {
                shapeBtn.textContent = "切換為圓形";
            } else {
                shapeBtn.textContent = "切換為方形 (App Store用)";
            }
        }

        // 背景切換
        function toggleBg() {
            body.classList.toggle('transparent-mode');
            if(body.classList.contains('transparent-mode')) {
                bgBtn.textContent = "背景：透明 (可截圖)";
                bgBtn.style.background = "#52c41a"; // 綠色提示準備好了
            } else {
                bgBtn.textContent = "背景：深色";
                bgBtn.style.background = "#555";
            }
        }
    </script>
</body>
</html>